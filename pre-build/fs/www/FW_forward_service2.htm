<!DOCTYPE HTML>
<html>
<head>
<%11%>
<title>NETGEAR Router <%12%></title>
<link rel="stylesheet" href="<%13%>">
<link rel="stylesheet" href="css/scrollbar.css">
<link rel="stylesheet" href="css/button.css">

<script src="jquery.js"></script>
<script src="script/jquery.mousewheel.js"></script>
<script type="text/javascript" src="script/jquery.jscrollpane.min.js"></script>

<script src="script/script.js"></script>
<link rel="stylesheet" href="form.css">
<STYLE TYPE="text/javascript">
	classes.num.all.fontFamily = "Courier";
	classes.num.all.fontSize = "10pt" ;
</style>
<%14%>
<script language="javascript" type="text/javascript">
<!--
var srvtypeSel = -1;

  
    $(document).ready(function()
    {	
//        $('.scroll-pane').jScrollPane('scrollbarMargin:5px');
        $("#target").submit(function() {
            buttonFilter();
        });

    });


    function setHelpIframeVisible(){
        $('.help-frame-div').css("visibility","visible");
    }


    function showHelpIframe() {

        var imgSrc=document.getElementById('help-button');

        if(imgSrc.src.search("up")>=0)
        {
            $(".help-frame-div").show();
            window.frames["helpframe"].$('#content').jScrollPane({showArrows:true});
            imgSrc.src="img/helparrowdown-icon.png";
        }
        else
        {
            $(".help-frame-div").hide();
            imgSrc.src="img/helparrowup-icon.png";
            setTimeout(setHelpIframeVisible,500);
        }
        if((navigator.appName.indexOf("Internet Explorer")==-1) ||
           (navigator.appVersion.indexOf("MSIE 9")==-1))
             change_size();

    }

    function moveToHTMLend()
    {
        window.location.href='#helpframe-anchor';
        setHelpIframeVisible();
    }


    function loadhelp(fname,anchname)
    {
                var pane = window.frames["helpframe"].$('#content');
                var imgSrc=document.getElementById('help-button');
                if(imgSrc.src.search("up")<0)
                {

                        $(".help-frame-div").show();
                        pane.jScrollPane({showArrows:true});


                        if ((loadhelp.arguments.length == 1 ) || (anchname == "" ))
                        {
                                window.frames["helpframe"].location.href=fname+"_h.htm";
                                $(".help-frame-div").show();
                        }
                        else
                        {
                                window.frames["helpframe"].location.href=fname+"_h.htm#" + anchname;
                                $(".help-frame-div").show();
                        }

                        $(".help-frame-div").show();
                        pane.jScrollPane({showArrows:true});

                }
    }

   

function init()
{
    var cf = document.forms[0];
    var data = cf.entryData.value.split(";");
    var useSameRange;
    
    if (cf.oldInternalSport.value == cf.oldSport.value && cf.oldInternalEport.value == cf.oldEport.value)
        useSameRange = 1;
    else 
        useSameRange = 0;
        
        
    if(cf.entryData.value != "")
    {
        cf.portname.value = cf.oldService.value;

        cf.port_start.value = cf.oldSport.value;
        cf.port_end.value = cf.oldEport.value;
        
        if (useSameRange == 1)
        {
            cf.same_range.checked = true;
            cf.internal_port_start.disabled=true;
            cf.internal_port_start.value = cf.port_start.value;
            cf.internal_port_end.value = cf.port_end.value;
        }
        else
        {
            cf.same_range.checked = false;
            cf.internal_port_start.disabled=false;
            cf.internal_port_start.value = cf.oldInternalSport.value;
            cf.internal_port_end.value = cf.oldInternalEport.value;
        }

        if ( cf.oldType.value == "BOTH" )
            cf.srvtype.selectedIndex = 0;
        else if ( cf.oldType.value == "TCP" )
            cf.srvtype.selectedIndex = 1;
        else if ( cf.oldType.value == "UDP" )
            cf.srvtype.selectedIndex = 2;
        srvtypeSel = cf.srvtype.selectedIndex;
        var servIP = cf.oldIP.value.split(".");
        cf.server_ip1.value = servIP[0];
        cf.server_ip2.value = servIP[1];
        cf.server_ip3.value = servIP[2];
        cf.server_ip4.value = servIP[3];
    }
    else
    {
        var lanSplit = cf.lanIP.value.split(".");

        cf.server_ip1.value=lanSplit[0];
        cf.server_ip2.value=lanSplit[1];
        cf.server_ip3.value=lanSplit[2];
        cf.server_ip4.value="";
        
        if (useSameRange == 1)
        {
            cf.same_range.checked = true;
            cf.internal_port_start.disabled=true;
        }
        else
        {
            cf.same_range.checked = false;
            cf.internal_port_start.disabled=false;
        }
    }
    return true;
}

function sel(ipaddr)
{
	var cf = document.forms[0];
	var ip = ipaddr.split(".");
	cf.server_ip1.value = ip[0];
	cf.server_ip2.value = ip[1];
	cf.server_ip3.value = ip[2];
	cf.server_ip4.value = ip[3];
}

function Check()
{
    var cf = document.forms[0];

    if(cf.portname.value==""||cf.portname.value.match( /[^\x20-\x7E]/ ))
    {
		alert("<%1129%>");
		cf.portname.focus();
		return false;
	}

	if(isNumeric(cf.port_start,65535))
	{
		alert("<%1130%>");
		cf.port_start.focus();
		return false;
	}
	if(isNumeric(cf.port_end,65535))
	{
		alert("<%1131%>");
		cf.port_end.focus();
		return false;
	}
	if(isNumeric(cf.internal_port_start,65535))
	{
		alert("<%1130%>");
		cf.internal_port_start.focus();
		return false;
	}	
	if(parseInt(cf.port_start.value,10) < 1)
	{
		alert("<%1132%>");
		cf.port_start.focus();
		return false;
    }
	if(parseInt(cf.port_end.value,10) < 1)
	{
		alert("<%1133%>");
		cf.port_end.focus();
		return false;
    }
    if(parseInt(cf.internal_port_start.value,10) < 1)
	{
		alert("<%1132%>");
		cf.internal_port_start.focus();
		return false;
    }
	if(parseInt(cf.port_start.value,10) > parseInt(cf.port_end.value,10))
	{
		alert("<%754%>");
		cf.port_start.focus();
		return false;
    }
    
    if (!cf.same_range.checked)
    {
        if ((parseInt(cf.port_end.value,10) - parseInt(cf.port_start.value,10)) <= (65535-parseInt(cf.internal_port_start.value,10)))
        {
            //cf.internal_port_end.value = cf.internal_port_start.value + cf.port_start.value - cf.port_end.value;
            cf.internal_port_end.value = parseInt(cf.internal_port_start.value,10) - parseInt(cf.port_start.value,10) + parseInt(cf.port_end.value,10);        
        }
        else
        {
            alert("<%1131%>");
    		return false;
        }
    }

    if(isNumeric(cf.internal_port_end,65535))
	{
		alert("<%1131%>");
		//cf.internal_port_end.focus();
		return false;
	}
    
	cf.port_start.value = parseInt(cf.port_start.value,10);
	cf.port_end.value = parseInt(cf.port_end.value,10);

	cf.internal_port_start.value = parseInt(cf.internal_port_start.value,10);
	cf.internal_port_end.value = parseInt(cf.internal_port_end.value,10);

	if(checkIP(cf.server_ip1,cf.server_ip2,cf.server_ip3,cf.server_ip4,254)
		|| parseInt(cf.server_ip4.value,10) == 0)
	{
        alert("<%10%>")
		return false;
	}
	else
	{
		cf.server_ip1.value = parseInt(cf.server_ip1.value,10);
		cf.server_ip2.value = parseInt(cf.server_ip2.value,10);
		cf.server_ip3.value = parseInt(cf.server_ip3.value,10);
		cf.server_ip4.value = parseInt(cf.server_ip4.value,10);
	}
	return true;
}

function Final()
{
    var cf = document.forms[0];

	if(cf.entryData.value != "")
	    cf.action.value = "edit_apply";
	else
	    cf.action.value = "add_apply";

    cf.newType.value = cf.srvtype.options[cf.srvtype.selectedIndex].value;
	cf.newIP.value = cf.server_ip1.value + "." + cf.server_ip2.value + "." +
	                 cf.server_ip3.value + "." + cf.server_ip4.value;

    if( (cf.entryData.value != "")&&
        (cf.oldIP.value == cf.newIP.value)&&
        (cf.srvtype.selectedIndex == srvtypeSel)&&
        (cf.port_start.value == cf.oldSport.value)&&
        (cf.port_end.value == cf.oldEport.value) &&
        (cf.internal_port_start.value == cf.oldInternalSport.value)&&
        (cf.internal_port_end.value == cf.oldInternalEport.value)        
      )
    {
        cf.entryData.value = "NoEdit";
    }
    else
    {
        cf.entryData.value = "";
    }
                  
    return true;
}

function setInternalPortDisable()
{
    var cf = document.forms[0];
	if (cf.same_range.checked)
	{
	    cf.internal_port_start.disabled=true;
        cf.internal_port_start.value = cf.port_start.value;
        cf.internal_port_end.value = cf.port_end.value;
    }
    else
    {
        cf.internal_port_start.disabled=false;
    }
}

function internal_port_update()
{
    var cf = document.forms[0];
    
    if (cf.same_range.checked)
	{
	    cf.internal_port_start.value = cf.port_start.value; 
	    cf.internal_port_end.value = cf.port_end.value;
	}
	else
	{
        if((cf.port_start.value.length>0)&&(cf.port_end.value.length>0)&&(cf.internal_port_start.value.length>0))
        {
            //cf.internal_port_end.value = cf.internal_port_start.value - cf.port_start.value + cf.port_end.value;
            //cf.internal_port_end.value = parseInt(cf.internal_port_start.value,10) - parseInt(cf.port_start.value,10) + parseInt(cf.port_end.value,10);        
            if ((parseInt(cf.port_end.value,10) - parseInt(cf.port_start.value,10)) <= (65535-parseInt(cf.internal_port_start.value,10)))
            {
                cf.internal_port_end.value = parseInt(cf.internal_port_start.value,10) - parseInt(cf.port_start.value,10) + parseInt(cf.port_end.value,10);        
            }
            else
            {
                alert("<%1131%>");
        		return false;
            }

        }
    }
}
//-->

</script>
<link rel="stylesheet" type="text/css" href="css/custom.css">
</head>
<body  leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onload="change_size(); init();" class="page-body"  onResize="change_size();" >
<img class="cover-image" src="<%68%>">
<!--<img class="body-image" src="<%69%>">-->
<div id="full-page-container">

<form id="target"  name="formname" action="pforward.cgi" method="POST">
<input type="hidden" name="buttonHit"><input type="hidden" name="buttonValue">
	<img class="subtop-image" src="<%70%>">
<div class="subhead2"> <%1134%></div>
<table border="0"    style="height:370px"  class="subhead2-table">

<tr align="left" valign="middle">
<td  style="padding-bottom:10px" align="center" colspan="2" class="table-seperate-border">
<div class="fix_button">
<button value="<%74%>" onClick="buttonClick(this,'<%74%>');location.href='FW_forward2.htm'" type="submit" name="cancel" class="button-cancel cancel_bt" ><%75%></button>
<button value="<%72%>"  onclick="buttonClick(this,'<%72%>');if(!Check()) return false; Final();" type="submit" name="apply" class=<%329%> ><%73%></button>
</div>
</td>
</tr>

<tr><td class="scrollpane-table-seperate-border" colspan="2"><div class="scroll-pane main_bas" style="height:365px;width:620px;overflow:auto;scrolling:auto;margin-top: -80px"><table style="border-collapse:collapse;width:97%">
		

        <tr>
	        <td colspan="2">
		        <table border ="0" cellpadding ="0" cellspacing ="0" width="100%">
			        <tr>
		 	            <TD NOWRAP width="37%"><%1111%></td>
				        <TD NOWRAP width="63%" style="margin-top: -10px">
				            <input class="input1" type="text" name="portname" size="30" maxlength="30" value=""></td></tr>
				    <tr>
				        <TD NOWRAP width="37%"><%742%></td>
				        <TD NOWRAP width="63%">
				            <select name="srvtype" size="1">
				                <option value="TCP/UDP"><%766%></option>
				                <option value="TCP"><%764%></option>
				                <option value="UDP"><%765%></option></SELECT></TD></TR>
		            <tr>
				        <TD NOWRAP width="37%"><%1135%></td>
				        <TD NOWRAP width="63%" style="margin-top: -10px">
				            <input class="input1" type="text" class="num" name="port_start" size="6" maxlength="5" value="" onBlur="internal_port_update()" onFocus="this.select();">(1~65535)	</td></tr>
		            <tr>
		 	            <TD NOWRAP width="37%"><%1136%></td>
		 	            <TD NOWRAP width="63%" style="margin-top: -10px">
		 	                <input class="input1" type="text" class="num" name="port_end" size="6" maxlength="5" value="" onBlur="internal_port_update()" onFocus="this.select();">(1~65535)	</td></tr>
                    <tr>
                       <TD colspan="2">
                           <label class="checkbox-container">
                            <input type="checkbox" name="same_range" value="same_range" onClick="setInternalPortDisable();"> <%1137%> <span class="checkbox-checkmark"></span>
                            </label>
                        </td>
                    </tr>

		            <tr>
				        <TD NOWRAP width="37%"><%1138%></td>
				        <TD NOWRAP width="63%" style="margin-top: -10px">
				            <input class="input1" type="text" class="num" name="internal_port_start" size="6" maxlength="5" value="" onBlur="internal_port_update()" onFocus="this.select();">(1~65535)	</td></tr>

		            <tr>
		 	            <TD NOWRAP width="37%"><%1139%></td>
		 	            <TD NOWRAP width="63%" style="margin-top: -10px">
		 	                <input class="input1" class="num" type="text" name="internal_port_end" disabled="true" value=""></td></tr>
			        <tr>
				        <TD NOWRAP width="37%"><%1122%></td>
				        <TD NOWRAP width="63%" class="num ip-input-row">
				            <input type="text" class="num" name="server_ip1" size="4" maxlength="3" value="192" onFocus="this.select();" onkeydown="bscheck(event,this,1)" onkeyup="jumpcheck(this,0)">.
                            <input type="text" class="num" name="server_ip2" size="4" maxlength="3" value="168" onFocus="this.select();" onkeydown="bscheck(event,this,0)" onkeyup="jumpcheck(this,0)">.
                            <input type="text" class="num" name="server_ip3" size="4" maxlength="3" value="0" onFocus="this.select();" onkeydown="bscheck(event,this,0)" onkeyup="jumpcheck(this,0)">.
                            <input type="text" class="num" name="server_ip4" size="4" maxlength="3" value="" onFocus="this.select();" onkeydown="bscheck(event,this,0)" onkeyup="jumpcheck(this,1)"></td></tr>
			        <tr>
				        <TD NOWRAP width="37%"></td>
				        <TD NOWRAP width="63%"><%1140%></td></tr>
                    <tr>
				        
				        <TD NOWRAP width="63%">
				            <table id="fw_forward_Table" class="sortable tbWhite" border="1" cellpadding="2" cellspacing="0" width="100%">
                            <tr class="table_header">
                             <td nowrap align="center" width="20%"><span class="thead"> &nbsp;</span></td>
                             <td nowrap align="center" width="30%"><span class="thead"><%602%></span></td>
                             <td nowrap align="center" width="50%"><span class="thead"><%813%></span></td>
                            </tr><%1141%></table>
				        </td>
				    </tr>				        
			    </table></td></tr>
        <tr><td colspan="2" height="12" ><div style="background-image:url('seprator.gif');width:100%;background-repeat:repeat-x;">&nbsp;</div></td></tr>
        
    </table></div></td></tr>
<tr valign="middle" align="center"><td class="table-seperate-border" colspan="2" style="padding-left:0px"><div class="help-frame-div" > <iframe id="helpframe"  src="FW_forward_service_h.htm" class="help-iframe" scrolling="no" name="helpframe" frameborder="0" onload="showHelpIframe();"></iframe> </div> </td> </tr>
</table>
   <!--<img class="subfooter-image" src="img/subhead2-bottom.gif">-->
<div class="subhead2-bottom" >
    <span class="help_ico"><img src="img/help-icon.png" onmouseover="changeCursorPointer();" onclick="showHelpIframe();" onmouseout="changeCursorDefault();"></span>
    <span class="subhead2-text help_center_text" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();"> <%210%> </span>
    <span class="button-help-arrow">
      <img src="img/helparrowdown-icon.png" id="help-button" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();" ></span>
    <span class="subhead2-text help_right_text" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();"> <%211%> </span>
      </div>



    <input type="hidden" name="action" value="init">
    <input type="hidden" name="oldService" value="<%1142%>">
    <input type="hidden" name="oldType" value="<%1143%>">
    <input type="hidden" name="newType" value="">
    <input type="hidden" name="oldSport" value="<%1144%>">
    <input type="hidden" name="oldEport" value="<%1145%>">
    <input type="hidden" name="oldInternalSport" value="<%1146%>">
    <input type="hidden" name="oldInternalEport" value="<%1147%>">
    <input type="hidden" name="oldIP" value="<%1148%>">
    <input type="hidden" name="newIP" value="">
    <input type="hidden" name="lanIP" value="<%1127%>">
    <input type="hidden" name="entryData" value="<%1128%>">
    

<a name="helpframe-anchor"></a>
</form>

</div>
</body>
</html>

